// AUTO-GENERATED by @lena/zenstack-form-plugin
// DO NOT EDIT MANUALLY

import { z } from 'zod/v4'
import { VideoCodecFormSchema } from './enums/VideoCodec.form'
import { RateControlFormSchema } from './enums/RateControl.form'
import { TuneFormSchema } from './enums/Tune.form'
import { MultipassFormSchema } from './enums/Multipass.form'
import { BRefModeFormSchema } from './enums/BRefMode.form'

/**
 * Схема создания EncodingProfile с UI метаданными
 */
export const EncodingProfileCreateFormSchema = z.object({
  name: z.string()
    .meta({
      ui: { title: 'Название', placeholder: 'Например: Blackwell UHQ' }
    }),
  isBuiltIn: z.boolean().default(false),
  isDefault: z.boolean().default(false)
    .meta({
      ui: { title: 'Профиль по умолчанию', fieldType: 'switch' }
    }),
  codec: VideoCodecFormSchema
    .meta({
      ui: { title: 'Видеокодек', fieldType: 'radioCard' }
    }),
  useGpu: z.boolean().default(true)
    .meta({
      ui: { title: 'Использовать GPU', fieldType: 'switch' }
    }),
  rateControl: RateControlFormSchema
    .meta({
      ui: { title: 'Rate Control', fieldType: 'radioCard' }
    }),
  cq: z.number().int().min(15).max(40).default(28)
    .meta({
      ui: { title: 'Качество (CQ/CRF)', description: 'Меньше = лучше качество, больше размер', fieldType: 'slider', fieldProps: {"showValue":true} }
    }),
  maxBitrate: z.number().int().min(1).max(100).optional()
    .meta({
      ui: { title: 'Макс. битрейт (Mbps)', description: 'Для VBR режима', fieldType: 'numberInput' }
    }),
  preset: z.string().default('p5')
    .meta({
      ui: { title: 'Пресет скорости', fieldType: 'select', fieldProps: {"options":["p1","p2","p3","p4","p5","p6","p7"]} }
    }),
  tune: TuneFormSchema
    .meta({
      ui: { title: 'Tune', fieldType: 'radioCard' }
    }),
  multipass: MultipassFormSchema
    .meta({
      ui: { title: 'Multipass', fieldType: 'radioCard' }
    }),
  spatialAq: z.boolean().default(true)
    .meta({
      ui: { title: 'Spatial AQ', description: 'Улучшает качество плоских областей', fieldType: 'switch' }
    }),
  temporalAq: z.boolean().default(true)
    .meta({
      ui: { title: 'Temporal AQ', description: 'Адаптирует качество для движущихся сцен', fieldType: 'switch' }
    }),
  aqStrength: z.number().int().min(1).max(15).default(8)
    .meta({
      ui: { title: 'AQ Strength', fieldType: 'slider', fieldProps: {"showValue":true} }
    }),
  lookahead: z.number().int().min(0).max(250).optional()
    .meta({
      ui: { title: 'Lookahead Frames', description: 'Количество кадров для анализа (0 = авто)', fieldType: 'slider', fieldProps: {"showValue":true} }
    }),
  lookaheadLevel: z.number().int().min(0).max(3).optional()
    .meta({
      ui: { title: 'Lookahead Level', fieldType: 'slider', fieldProps: {"showValue":true} }
    }),
  gopSize: z.number().int().min(1).max(600).default(240)
    .meta({
      ui: { title: 'GOP Size', description: 'Расстояние между ключевыми кадрами', fieldType: 'numberInput' }
    }),
  bRefMode: BRefModeFormSchema
    .meta({
      ui: { title: 'B-Ref Mode', fieldType: 'radioCard' }
    }),
  force10Bit: z.boolean().default(false)
    .meta({
      ui: { title: 'Принудительно 10-bit', description: 'Выводить 10-bit даже для 8-bit источника', fieldType: 'switch' }
    }),
  temporalFilter: z.boolean().default(false)
    .meta({
      ui: { title: 'Temporal Filter', description: 'Blackwell+ только: +4-5% качества при движении', fieldType: 'switch' }
    }),
  preferCpu: z.boolean().default(false)
    .meta({
      ui: { title: 'Предпочитать CPU', description: 'Принудительно использовать libsvtav1 вместо NVENC', fieldType: 'switch' }
    }),
  deband: z.boolean().default(true)
    .meta({
      ui: { title: 'Deband фильтр', description: 'Убирает banding в градиентах (может вызывать краши на тяжёлых файлах)', fieldType: 'switch' }
    })
})

/**
 * Схема обновления EncodingProfile (все поля опциональны)
 */
export const EncodingProfileUpdateFormSchema = EncodingProfileCreateFormSchema.partial()

/**
 * Поля, исключённые из форм
 */
export const EncodingProfileExcludedFields = ['id', 'settings', 'episodes', 'createdAt', 'updatedAt'] as const

/**
 * Типы
 */
export type EncodingProfileCreateForm = z.infer<typeof EncodingProfileCreateFormSchema>
export type EncodingProfileUpdateForm = z.infer<typeof EncodingProfileUpdateFormSchema>
